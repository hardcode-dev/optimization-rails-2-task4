# Шаг 1 настройка метрик

Newrelic и Scout активно используются у нас в компании так что их установка прошла гладко, скайлайт уже стоял так что я добавил только ключ, залил конечно в репозиторий но он не секьюрный а поднимать тут Dotfiles или другую систему доставки ENV вне скоупа задания

Я давно хотел посмотреть yabeda-prometheus-grafanа и вот момент настал,

    поставил все через brew
    сменил графане порт на 3001 в /usr/local/etc/grafana/grafana.ini
    добавил запуск прометеуса в Procfile
    сделал config/prometheus.yml
    немного помучался с yabeda он то ругался на 2 подключения то не показывал /metrics помогло перечитать документацию по всем гемам внимательно
    поставил дашборд ябеды в графану (спасибо гугл) https://grafana.com/grafana/dashboards/11668

Чудо но это все заработало жаль графиков из коробки немного но зато получил общее понимание по PromQL типа `sum(rate(rails_requests_total[1m])) by (status)`

Rack-mini-profiler и rails-panel мы уже ставили ранее, проблем не возникло
